define("components/test/demo/comment.jsx",function(require){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=require("node_modules/react/react"),_react2=_interopRequireDefault(_react),_reactDom=require("node_modules/react-dom/index"),_reactDom2=_interopRequireDefault(_reactDom);require("node_modules/whatwg-fetch/fetch");var Comment=function(_React$Component){function Comment(){return _classCallCheck(this,Comment),_possibleConstructorReturn(this,Object.getPrototypeOf(Comment).apply(this,arguments))}return _inherits(Comment,_React$Component),_createClass(Comment,[{key:"rawMarkUp",value:function rawMarkUp(){var md=new Remarkable,rawMarkUp=md.render(this.props.children.toString());return{__html:rawMarkUp}}},{key:"render",value:function(){return _react2.default.createElement("div",{className:"comment"},_react2.default.createElement("h2",{className:"commentAuthor"},this.props.author),_react2.default.createElement("div",{dangerouslySetInnerHTML:this.rawMarkUp()}))}}]),Comment}(_react2.default.Component),CommentList=function(_React$Component2){function CommentList(){return _classCallCheck(this,CommentList),_possibleConstructorReturn(this,Object.getPrototypeOf(CommentList).apply(this,arguments))}return _inherits(CommentList,_React$Component2),_createClass(CommentList,[{key:"render",value:function(){console.log(this.props.data,"33333");var commentNodes=this.props.data.map(function(comment){return _react2.default.createElement(Comment,{author:comment.author,key:comment.id},comment.text)});return _react2.default.createElement("div",{className:"commentList"},commentNodes)}}]),CommentList}(_react2.default.Component),CommentForm=function(_React$Component3){function CommentForm(props){_classCallCheck(this,CommentForm);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(CommentForm).call(this,props));return _this3.state={author:"",text:""},_this3.handleAuthorChange=_this3.handleAuthorChange.bind(_this3),_this3.handleTextChange=_this3.handleTextChange.bind(_this3),_this3.handleSubmit=_this3.handleSubmit.bind(_this3),_this3}return _inherits(CommentForm,_React$Component3),_createClass(CommentForm,[{key:"handleAuthorChange",value:function(e){this.setState({author:e.target.value})}},{key:"handleTextChange",value:function(e){this.setState({text:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var author=this.state.author.trim(),text=this.state.text.trim();text&&author&&(this.props.onCommentSubmit({author:author,text:text,id:Math.random()}),this.setState({author:"",text:""}))}},{key:"render",value:function(){return _react2.default.createElement("form",{className:"commentForm",onSubmit:this.handleSubmit},_react2.default.createElement("p",null,_react2.default.createElement("input",{type:"text",placeholder:"Your name",value:this.state.author,onChange:this.handleAuthorChange})),_react2.default.createElement("p",null,_react2.default.createElement("input",{type:"text",placeholder:"Say something...",value:this.state.text,onChange:this.handleTextChange})),_react2.default.createElement("p",null,_react2.default.createElement("input",{type:"submit",value:"Post"})))}}]),CommentForm}(_react2.default.Component),CommentBox=function(_React$Component4){function CommentBox(props){_classCallCheck(this,CommentBox);var _this4=_possibleConstructorReturn(this,Object.getPrototypeOf(CommentBox).call(this,props));return _this4.state={data:[]},_this4.handleCommentSubmit=_this4.handleCommentSubmit.bind(_this4),_this4}return _inherits(CommentBox,_React$Component4),_createClass(CommentBox,[{key:"loadCommentsFromServer",value:function(){var _this5=this;fetch("/api/comments").then(function(res){return res.json()}).then(function(data){_this5.setState({data:data})})}},{key:"handleCommentSubmit",value:function(comment){var _this6=this;fetch("/api/post",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(comment)}).then(function(response){return response.json()}).then(function(data){_this6.setState({data:data})})}},{key:"componentDidMount",value:function(){this.loadCommentsFromServer()}},{key:"render",value:function(){return _react2.default.createElement("div",{className:"commentBox"},_react2.default.createElement("h1",null,"Comments"),_react2.default.createElement(CommentList,{data:this.state.data,pollInterval:2e3}),_react2.default.createElement(CommentForm,{onCommentSubmit:this.handleCommentSubmit}))}}]),CommentBox}(_react2.default.Component);_reactDom2.default.render(_react2.default.createElement(CommentBox,{url:"/api/comments"}),document.getElementById("demo1"))});